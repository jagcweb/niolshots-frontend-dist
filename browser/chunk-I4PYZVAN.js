import{$a as r,Aa as g,Ab as I,Da as d,Gb as x,Hb as M,Ib as b,Jb as F,Kb as D,Lb as N,Oa as o,Pa as i,Qa as n,Ra as p,Va as h,Wa as m,_a as c,ab as u,bb as v,cb as E,db as _,eb as C,fa as y,qa as s,yb as T,zb as S}from"./chunk-FH53R3XP.js";function $(a,e){if(a&1&&(i(0,"span",27),r(1),n()),a&2){let t=m(2).$implicit;s(),v(" ",t.additionalInfo," ")}}function k(a,e){if(a&1&&(i(0,"div",24)(1,"span",25),r(2),n(),d(3,$,2,1,"span",26),n()),a&2){let t=m().$implicit;s(),c(t.team+"-team"),s(),v(" ",t.team==="home"?"Local":"Visitante"," "),s(),o("ngIf",t.additionalInfo)}}function P(a,e){if(a&1&&(i(0,"div",14)(1,"div",15)(2,"span",16),r(3),n(),i(4,"div",17),p(5,"i",18),n()(),i(6,"div",19)(7,"div",20)(8,"span",21),r(9),n(),i(10,"span",22),r(11),n()(),d(12,k,4,4,"div",23),n()()),a&2){let t=e.$implicit,l=m(2);c(l.getEventCssClass(t)),s(3),v("",t.minute||t.time,"'"),s(),c(l.getEventTypeClass(t)),s(),c(l.getEventIcon(t)),s(4),u(t.playerName||(t.player==null?null:t.player.name)),s(2),u(l.getEventDescription(t)),s(),o("ngIf",l.hasSecondaryInfo(t))}}function B(a,e){if(a&1&&(i(0,"div",12),d(1,P,13,10,"div",13),n()),a&2){let t=m();s(),o("ngForOf",t.filteredEvents)("ngForTrackBy",t.trackByEventId)}}function j(a,e){a&1&&(i(0,"div",28)(1,"div",29),p(2,"i",30),n(),i(3,"div",31)(4,"h4"),r(5,"No hay eventos para mostrar"),n(),i(6,"p"),r(7,"No se encontraron eventos que coincidan con el filtro seleccionado."),n()()())}function q(a,e){a&1&&(i(0,"div",32)(1,"div",33),p(2,"i",34),i(3,"span"),r(4,"Cargando eventos del partido..."),n()()())}var w=class a{summary;homeColor="#1a78cf";awayColor="#e74c3c";selectedEventFilter="all";filteredEvents=[];allEvents=[];loading=!1;ngOnInit(){this.processEvents()}ngOnChanges(){this.processEvents()}processEvents(){if(!this.summary){this.allEvents=[],this.filteredEvents=[];return}this.allEvents=[],this.summary.shots&&this.summary.shots.forEach(e=>{this.allEvents.push({id:`shot_${e.player?.id}_${e.time}_${Math.random()}`,time:e.time,minute:e.time,timeSeconds:e.timeSeconds,type:e.shotType==="goal"?"goal":"shot",subType:e.shotType,player:e.player,playerName:e.player?.name,team:e.isHome?"home":"away",description:e.hasAssist?e.assistDescription:"",situation:e.situation,bodyPart:e.bodyPart,xg:e.xg,x:e.x,y:e.y,additionalInfo:e.situation||e.bodyPart})}),this.summary.fouls&&this.summary.fouls.forEach(e=>{this.allEvents.push({id:`foul_${e.playerId}_${e.time}_${Math.random()}`,time:e.time,minute:e.time,timeSeconds:e.timeSeconds,type:"foul",subType:e.foulType,playerName:e.playerName,team:e.team,description:e.description,additionalInfo:e.foulType})}),this.summary.saves&&this.summary.saves.forEach(e=>{this.allEvents.push({id:`save_${e.playerId}_${e.time}_${Math.random()}`,time:e.time,minute:e.time,timeSeconds:e.timeSeconds,type:"save",subType:e.saveType,playerName:e.playerName,team:e.team,description:e.description,additionalInfo:"Parada del portero"})}),this.allEvents.sort((e,t)=>t.timeSeconds-e.timeSeconds),this.applyFilter()}onFilterChange(){this.applyFilter()}applyFilter(){switch(this.selectedEventFilter){case"goals":this.filteredEvents=this.allEvents.filter(e=>e.type==="goal");break;case"cards":this.filteredEvents=this.allEvents.filter(e=>e.type==="foul"&&(e.subType?.includes("amarilla")||e.subType?.includes("roja")));break;case"fouls":this.filteredEvents=this.allEvents.filter(e=>e.type==="foul");break;case"saves":this.filteredEvents=this.allEvents.filter(e=>e.type==="save");break;default:this.filteredEvents=[...this.allEvents]}}getEventCssClass(e){let t=["event-timeline-item"];return e.team&&t.push(`${e.team}-team-event`),e.type&&t.push(`${e.type}-event-type`),t.join(" ")}getEventTypeClass(e){switch(e.type){case"goal":return"goal-indicator";case"shot":return"shot-indicator";case"foul":return e.subType?.includes("amarilla")?"yellow-card-indicator":e.subType?.includes("roja")?"red-card-indicator":"foul-indicator";case"save":return"save-indicator";default:return"default-indicator"}}getEventIcon(e){switch(e.type){case"goal":return"fa-futbol";case"shot":return"fa-dot-circle";case"foul":return e.subType?.includes("amarilla")||e.subType?.includes("roja")?"fa-square":"fa-hand";case"save":return"fa-shield-alt";default:return"fa-circle"}}getEventDescription(e){switch(e.type){case"goal":return"Gol";case"shot":return this.getShotTypeLabel(e.subType);case"foul":return e.subType||"Falta";case"save":return"Parada";default:return"Evento"}}getShotTypeLabel(e){return{OnTarget:"Tiro a puerta",OffTarget:"Tiro desviado",Blocked:"Tiro bloqueado",Post:"Tiro al poste",goal:"Gol"}[e]||"Tiro"}hasSecondaryInfo(e){return!!(e.team||e.additionalInfo)}trackByEventId(e,t){return t.id||`${t.type}_${e}`}static \u0275fac=function(t){return new(t||a)};static \u0275cmp=g({type:a,selectors:[["app-match-detail-events"]],inputs:{summary:"summary",homeColor:"homeColor",awayColor:"awayColor"},features:[y],decls:18,vars:4,consts:[[1,"match-events-container"],[1,"event-filter-section"],["for","event-filter-select",1,"filter-label"],["id","event-filter-select",1,"event-filter-select",3,"ngModelChange","change","ngModel"],["value","all"],["value","goals"],["value","cards"],["value","fouls"],["value","saves"],["class","events-timeline",4,"ngIf"],["class","empty-events-state",4,"ngIf"],["class","events-loading",4,"ngIf"],[1,"events-timeline"],["class","event-timeline-item",3,"class",4,"ngFor","ngForOf","ngForTrackBy"],[1,"event-timeline-item"],[1,"event-time-marker"],[1,"event-minute"],[1,"event-type-indicator"],[1,"fas"],[1,"event-details"],[1,"event-primary-info"],[1,"player-name"],[1,"event-description"],["class","event-secondary-info",4,"ngIf"],[1,"event-secondary-info"],[1,"team-indicator"],["class","additional-info",4,"ngIf"],[1,"additional-info"],[1,"empty-events-state"],[1,"empty-state-icon"],[1,"fas","fa-calendar-times"],[1,"empty-state-message"],[1,"events-loading"],[1,"loading-spinner"],[1,"fas","fa-spinner","fa-spin"]],template:function(t,l){t&1&&(i(0,"div",0)(1,"div",1)(2,"label",2),r(3,"Filtrar eventos:"),n(),i(4,"select",3),C("ngModelChange",function(f){return _(l.selectedEventFilter,f)||(l.selectedEventFilter=f),f}),h("change",function(){return l.onFilterChange()}),i(5,"option",4),r(6,"Todos los eventos"),n(),i(7,"option",5),r(8,"Solo goles"),n(),i(9,"option",6),r(10,"Tarjetas"),n(),i(11,"option",7),r(12,"Faltas"),n(),i(13,"option",8),r(14,"Paradas"),n()()(),d(15,B,2,2,"div",9)(16,j,8,0,"div",10)(17,q,5,0,"div",11),n()),t&2&&(s(4),E("ngModel",l.selectedEventFilter),s(11),o("ngIf",l.filteredEvents&&l.filteredEvents.length>0),s(),o("ngIf",!l.filteredEvents||l.filteredEvents.length===0),s(),o("ngIf",l.loading))},dependencies:[I,T,S,N,F,D,b,x,M],encapsulation:2})};export{w as MatchDetailEventsComponent};
